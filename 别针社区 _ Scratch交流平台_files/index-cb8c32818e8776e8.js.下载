(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5405],{45728:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(49095)}])},87320:function(e,s){"use strict";s.Z={src:"/_next/static/media/recommend.3a4465cc.svg",height:200,width:200,blurWidth:0,blurHeight:0}},90395:function(e,s,t){"use strict";t.d(s,{Z:function(){return f}});var i=t(85893),n=t(22546),c=t(86523);t(99008),t(92375),t(74256);var a=t(11752),o=t.n(a),r=t(66261),l=t.n(r),d=t(41664),h=t.n(d),u=t(25675),m=t.n(u);let{publicRuntimeConfig:p}=o()(),j=(e,s)=>'\n<svg width="'.concat(e,'" height="').concat(s,'" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n  <defs>\n    <linearGradient id="g">\n      <stop stop-color="#333" offset="20%" />\n      <stop stop-color="#222" offset="50%" />\n      <stop stop-color="#333" offset="70%" />\n    </linearGradient>\n  </defs>\n  <rect width="').concat(e,'" height="').concat(s,'" fill="#333" />\n  <rect id="r" width="').concat(e,'" height="').concat(s,'" fill="url(#g)" />\n  <animate xlink:href="#r" attributeName="x" from="-').concat(e,'" to="').concat(e,'" dur="1s" repeatCount="indefinite"  />\n</svg>'),x=e=>window.btoa(e);function f(e){let{carousel:s,autoplay:t=5e3}=e;if(!s||s.length<1){var a,o,r,d;s=[{url:"".concat(null!==(a=p.basePath)&&void 0!==a?a:"","/"),img:"".concat(null!==(o=p.basePath)&&void 0!==o?o:"","/img/welcome.png")},{url:"".concat(null!==(r=p.basePath)&&void 0!==r?r:"","/"),img:"".concat(null!==(d=p.basePath)&&void 0!==d?d:"","/img/coding.jpg")}]}return(0,i.jsx)(n.tq,{slidesPerView:1,modules:[c.tl,c.pt],pagination:{clickable:!0},autoplay:{delay:t},className:l().carousel,children:s.map((e,s)=>(0,i.jsx)(n.o5,{virtualIndex:s,draggable:!1,className:l().swiperSlide,children:(0,i.jsx)(h(),{href:e.url,legacyBehavior:!0,children:(0,i.jsx)(m(),{src:e.img,alt:e.url,layout:"fill",objectFit:"cover",placeholder:"blur",blurDataURL:"data:image/svg+xml,base64,".concat(x(j(700,475)))})})},e))})}},49095:function(e,s,t){"use strict";t.r(s),t.d(s,{__N_SSP:function(){return L},default:function(){return W}});var i=t(85893),n=t(67294),c=t(63763),a=t(43165),o=t(22553),r=t(65643),l=t(53856),d=t(9693),h=t(86979),u=t(56064),m=t(27484),p=t.n(m),j=t(25675),x=t.n(j),f=t(24329),g=t(70822),_=t(10154),v=t(85208),Z=t(39883),w=t(40899),k=t.n(w);class b extends n.Component{async componentDidMount(){"1"!=localStorage.getItem("welcome")&&this.props.initial&&await this.setState({open:!0}),this.modal.current&&!this.modal.current.confetti&&(this.modal.current.confetti=Z.Z.create(this.modal.current.confetti,{resize:!0})),this.state.open&&this.modal.current&&setTimeout(()=>{this.modal.current.confetti({particleCount:100,spread:70,origin:{y:.8},zIndex:9999})},0)}render(){return(0,i.jsx)("div",{ref:this.modal,children:(0,i.jsxs)(g.ZP,{closeButton:!0,"aria-labelledby":"welcome",open:this.state.open,className:k().modal,onClose:()=>{localStorage.setItem("welcome","1"),this.setState({open:!1})},children:[(0,i.jsx)(g.ZP.Header,{children:(0,i.jsxs)(_.Z,{children:[(0,i.jsx)(h.Z,{size:72,children:"\uD83E\uDD73"}),(0,i.jsx)(h.Z,{id:"modal-title",size:21,children:"社区公测啦！"}),(0,i.jsx)(h.Z,{size:14,color:"#a1a1a1",del:!0,children:"有生之年能够公测真是太棒了"})]})}),(0,i.jsxs)(g.ZP.Body,{children:[(0,i.jsxs)(h.Z,{children:["时隔",(0,i.jsx)(h.Z,{del:!0,children:"四年"}),"四个月的紧张开发，别针社区终于进入公测阶段，向广大 Scratcher 开放啦！"]}),(0,i.jsxs)(h.Z,{children:["由于社区仍然处于测试阶段，因此如果你在浏览过程中遇到了问题请发邮件至 ",(0,i.jsx)(v.ZP,{href:"mailto:abuse@ble.email",children:"abuse@ble.email"})," 告诉我们！"]}),(0,i.jsxs)(h.Z,{children:["最后，请不要忘记阅读我们的",(0,i.jsx)(v.ZP,{href:"/legal/rule",children:"社区守则"}),", ",(0,i.jsx)(v.ZP,{href:"/eula",children:"服务条款"}),"和",(0,i.jsx)(v.ZP,{href:"/legal/privacy",children:"隐私政策"}),"！"]})]}),(0,i.jsx)(g.ZP.Footer,{children:(0,i.jsx)(l.ZP,{auto:!0,onPress:()=>{this.setState({open:!1})},children:"不再提醒"})})]})})}constructor(e){super(e),this.state={open:!1},this.modal=n.createRef()}}var M=t(87320),P={src:"/_next/static/media/hot.9d8c1349.svg",height:200,width:200,blurWidth:0,blurHeight:0},N={src:"/_next/static/media/new.535ec6a9.svg",height:200,width:200,blurWidth:0,blurHeight:0},S=t(36209),y=t.n(S),D=t(36624),B=t(49872),C=t.n(B),z=t(63059),I=t(90395),T=t(44012),F=t(74806);class E extends n.Component{isBigMonth(){let e=this.props.intl;return e.locale.startsWith("zh")?-1!==[1,3,5,7,8,10,12].indexOf(parseInt(p()().format("M")))?"大":"小":""}handleCheckin(){let{intl:e}=this.props;if(!this.props.isLogin)return this.props.openSnackBar(e.formatMessage({id:"home.checkin.login",defaultMessage:"请先登录"}),"warning");c.Z.post("user/checkin").then(()=>{this.props.openSnackBar(e.formatMessage({id:"home.checkin.success",defaultMessage:"签到成功！"}),"success")}).catch(e=>{let s=e.message;"Already checkin"===s?this.props.openSnackBar(this.props.intl.formatMessage({id:"home.checkin.already",defaultMessage:"你已经签过到了~"}),"warning"):this.props.openSnackBar(this.props.intl.formatMessage({id:"home.checkin.fail",defaultMessage:"签到失败"}),"error")}).finally(()=>{this.setState({checked:!0})})}componentDidMount(){}render(){if(this.props.isDown)return(0,i.jsx)(z.Z,{isDown:!0});let{userInfo:e,isLogin:s,recommend:t,hot:n,newest:c}=this.props,u=this.props.intl;return(0,i.jsxs)(a.Z,{css:{paddingTop:"20px"},fluid:!0,className:y().topbox,children:[(0,i.jsx)("div",{children:(0,i.jsxs)(o.ZP.Container,{gap:2,justify:"center",wrap:"wrap",children:[(0,i.jsx)(o.ZP,{xs:100,sm:9,children:(0,i.jsx)(I.Z,{carousel:void 0})}),(0,i.jsx)(o.ZP,{xs:100,sm:3,children:(0,i.jsxs)(r.ZP,{className:y().checkin,children:[(0,i.jsxs)("div",{className:y().checkinText,children:[(0,i.jsx)(T.Z,{id:"home.checkin.welcome",defaultMessage:"欢迎回来"}),(0,i.jsx)("div",{className:y().username,children:s?e.name:u.formatMessage({id:"home.checkin.guest",defaultMessage:"游客"})})]}),(0,i.jsxs)("div",{className:y().date,children:[(0,i.jsx)("div",{children:p()().format("MMMM")+this.isBigMonth()}),(0,i.jsx)("div",{children:p()().format("DD")}),(0,i.jsx)("div",{children:p()().format("dddd")})]}),(0,i.jsx)("div",{className:y().checkinButton,children:(0,i.jsxs)(l.ZP,{onPress:this.handleCheckin,disabled:this.state.checked,auto:!0,className:"umami--click--checkin-button",children:[(0,i.jsx)(d.Z,{x:1}),(0,i.jsx)(T.Z,{id:"home.checkin.button",defaultMessage:"签到"}),(0,i.jsx)(d.Z,{x:1})]})})]})})]})}),(0,i.jsxs)("div",{className:y().projects,children:[(0,i.jsx)(f.Z,{projectData:t,isLoading:!1,optimizedImage:!0,children:(0,i.jsx)("div",{className:y().projectlist,children:(0,i.jsxs)(h.Z,{size:20,children:[(0,i.jsx)("div",{className:y().projectlist_icon,children:(0,i.jsx)(x(),{objectFit:"cover",layout:"fill",src:M.Z,alt:u.formatMessage({id:"home.projectlist.recommended",defaultMessage:"小编推荐"})})}),(0,i.jsx)(T.Z,{id:"home.projectlist.recommended",defaultMessage:"小编推荐"})]})})}),(0,i.jsx)(f.Z,{projectData:n,isLoading:!1,optimizedImage:!0,children:(0,i.jsx)("div",{className:y().projectlist,children:(0,i.jsxs)(h.Z,{size:20,children:[(0,i.jsx)("div",{className:y().projectlist_icon,children:(0,i.jsx)(x(),{objectFit:"cover",layout:"fill",src:P,alt:u.formatMessage({id:"home.projectlist.hot",defaultMessage:"热门作品"})})}),(0,i.jsx)(T.Z,{id:"home.projectlist.hot",defaultMessage:"热门作品"})]})})}),(0,i.jsx)(f.Z,{projectData:c,isLoading:!1,optimizedImage:!0,children:(0,i.jsx)("div",{className:y().projectlist,children:(0,i.jsxs)(h.Z,{size:20,children:[(0,i.jsx)("div",{className:y().projectlist_icon,children:(0,i.jsx)(x(),{objectFit:"cover",layout:"fill",src:N,alt:u.formatMessage({id:"home.projectlist.new",defaultMessage:"最新作品"})})}),(0,i.jsx)(T.Z,{id:"home.projectlist.new",defaultMessage:"最新作品"})]})})})]}),(0,i.jsx)(b,{initial:!1})]})}constructor(e){var s;super(e),this.state={checked:null===(s=e.userInfo)||void 0===s?void 0:s.has_checkin},C()(this,["handleCheckin"])}}var L=!0,W=(0,F.ZP)((0,u.$j)(e=>({isLogin:e.auth.user.isLogin,userInfo:e.auth.user.userInfo}),e=>({openSnackBar:(s,t)=>e((0,D.jW)(t,s))}))(E))},66261:function(e){e.exports={carousel:"carousel_carousel__vY_Rm",swiperSlide:"carousel_swiperSlide__o53uY"}},40899:function(e){e.exports={modal:"welcome-modal_modal__BCIr1"}},36209:function(e){e.exports={topbox:"home_topbox__02bDC",projects:"home_projects__Q0PZR",checkin:"home_checkin__pPcdw",checkinText:"home_checkinText__iDxFs",date:"home_date__pFl_T",checkinButton:"home_checkinButton__YNEnA",username:"home_username__ZMA7q",projectlist:"home_projectlist__s2WjF",projectlist_icon:"home_projectlist_icon__QervT"}}},function(e){e.O(0,[3336,5174,4329,9774,2888,179],function(){return e(e.s=45728)}),_N_E=e.O()}]);