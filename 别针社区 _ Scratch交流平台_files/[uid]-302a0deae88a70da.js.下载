(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9929],{85208:function(e,s,t){"use strict";t.d(s,{ZP:function(){return j}});var r,i,n=t(67294),o=t(50088),a=t(86212),c=t(54973);let l=(0,a.zo)("svg",{ml:"$1",as:"center",display:"inline-flex",color:"currentColor"}),d=(0,a.zo)("a",{display:"inline-flex",alignItems:"baseline",lineHeight:"inherit",textDecoration:"none",width:"fitContent",backgroundImage:"inherit",backgroundColor:"inherit",backgroundClip:"inherit",WebkitTextFillColor:"inherit","&:hover":{opacity:.8},"@motion":{transition:"none"},variants:{color:{default:{color:"$link"},text:{color:"$text"},primary:{color:"$primary"},secondary:{color:"$secondary"},success:{color:"$success"},warning:{color:"$warning"},error:{color:"$error"}},underline:{true:{"&:hover, &:active, &:focus":{textDecoration:"underline"}}},block:{true:{padding:"$2 $4",borderRadius:"$base"}},animated:{true:{transition:"$link"}}},compoundVariants:[{color:"default",block:!0,css:{"&:hover":{backgroundColor:(0,c.jK)(null==(r=a.rS.colors)||null==(i=r.link)?void 0:i.value,.2)}}},{color:"primary",block:!0,css:{"&:hover":{backgroundColor:"$primaryLight"}}},{color:"secondary",block:!0,css:{"&:hover":{backgroundColor:"$secondaryLight"}}},{color:"success",block:!0,css:{"&:hover":{backgroundColor:"$successLight"}}},{color:"warning",block:!0,css:{"&:hover":{backgroundColor:"$warningLight"}}},{color:"error",block:!0,css:{"&:hover":{backgroundColor:"$errorLight"}}}],defaultVariants:{color:"default",animated:!0}});var u=t(85893);let p=()=>(0,u.jsxs)(l,{viewBox:"0 0 24 24",width:"1em",height:"1em",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",shapeRendering:"geometricPrecision",className:"nextui-link-icon",children:[(0,u.jsx)("path",{d:"M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"}),(0,u.jsx)("path",{d:"M15 3h6v6"}),(0,u.jsx)("path",{d:"M10 14L21 3"})]});p.toString=()=>".nextui-link-icon";var h=n.memo(p),g=t(3569);let m=n.forwardRef(({children:e,icon:s,...t},r)=>(0,u.jsx)(d,{...t,ref:r,children:(0,u.jsxs)(u.Fragment,{children:[e,s&&(0,u.jsx)(h,{})]})}));g.Ts&&(m.displayName="NextUI.Link"),m.toString=()=>".nextui-link";var j=(0,o.Z)(m,{icon:!1})},74056:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user/[uid]",function(){return t(11270)}])},87320:function(e,s){"use strict";s.Z={src:"/_next/static/media/recommend.3a4465cc.svg",height:200,width:200,blurWidth:0,blurHeight:0}},25156:function(e,s,t){"use strict";var r=t(85893),i=t(40459),n=t.n(i),o=t(94184),a=t.n(o);s.Z=e=>{let{children:s,color:t}=e;return(0,r.jsx)("div",{className:a()(n().badge,n()[t]),children:(0,r.jsx)("span",{children:s})})}},46414:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return x}});var r=t(85893),i=t(67294),n=t(45697),o=t.n(n),a={shape:"M63.004.034C27.572 1.238 0 36.002 0 76.472v76.272c0 8.116 5.832 14.718 13 14.718s13-6.602 13-14.718c0-2.705 1.944-4.906 4.333-4.906 2.39 0 4.334 2.2 4.334 4.906 0 8.116 5.831 14.718 13 14.718 3.472 0 6.737-1.53 9.192-4.31 2.456-2.78 3.808-6.477 3.807-10.408 0-2.712 1.939-4.906 4.334-4.906 2.39 0 4.333 2.2 4.333 4.906 0 8.116 5.832 14.718 13 14.718 7.169 0 13-6.602 13-14.718 0-2.705 1.944-4.906 4.334-4.906 2.39 0 4.333 2.2 4.333 4.906 0 8.116 5.832 14.718 13 14.718s13-6.602 13-14.718V73.592c0-41.028-29.82-74.82-66.996-73.558z",shadow:"M111.5 166.08c4.427-2.35 7.5-7.444 7.5-13.336V73.592C119 35.918 93.857 4.346 60.962.412a6.603 6.603 0 0 1 2.042-.378C100.181-1.228 130 32.564 130 73.592v79.152c0 8.116-5.832 14.718-13 14.718-1.965 0-3.829-.496-5.5-1.383z"},c=t(8703),l=t(29677),d=t(9696),u=function(e){var s=e.size,t=e.color,r=e.mood,n=e.className;return i.createElement(d.Z,{className:n},i.createElement("svg",{width:.77*s,height:s,viewBox:"0 0 130 168",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},i.createElement("g",{id:"kawaii-ghost"},i.createElement("g",{id:"kawaii-ghost__body"},i.createElement("path",{d:a.shape,id:"kawaii-ghost__shape",fill:t}),i.createElement("path",{d:a.shadow,id:"kawaii-ghost__shadow",fillOpacity:".1",fill:"#000000"})),i.createElement(l.Z,{mood:r,transform:"translate(34 57)",uniqueId:(0,c.Z)()}))))};u.propTypes={size:o().number,mood:o().oneOf(["sad","shocked","happy","blissful","lovestruck","excited","ko"]),color:o().string},u.defaultProps={size:240,mood:"blissful",color:"#E0E4E8"};var p=t(10154),h=t(86979),g=t(71563),m=t.n(g),j=t(86896);function x(e){let{errorMessage:s}=e,t=(0,j.Z)();return(0,r.jsx)("div",{className:m().content,children:(0,r.jsxs)(p.Z,{children:[(0,r.jsx)(u,{mood:"ko",size:160}),(0,r.jsx)(h.Z,{size:48,children:"403"}),(0,r.jsx)(h.Z,{size:16,children:s||t.formatMessage({id:"status.forbidden.desc",defaultMessage:"你还没有权限访问这个界面 ┭┮﹏┭┮"})})]})})}},11270:function(e,s,t){"use strict";t.r(s),t.d(s,{__N_SSP:function(){return q},default:function(){return K}});var r=t(85893),i=t(67294),n=t(43165),o=t(22553),a=t(65643),c=t(86979),l=t(42495),d=t(9693),u=t(85208),p=t(56064),h=t(36624),g=t(11752),m=t.n(g),j=t(15477),x=t(45697),_=t.n(x),f=t(25675),v=t.n(f),Z=t(87320),b=t(70822),k=t(67344),w=t(83878),y=t(24329),N=t(28380),P=t.n(N),C=t(63763),M=t(49872),S=t.n(M);class z extends i.Component{handleChangePage(e){this.setState({page:e}),this.getSelfProject(e)}async getSelfProject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;try{this.setState({loading:!0});let t=await C.Z.get("project/getSelf?page=".concat(e,"&limit=").concat(s,"&is_share=true"));this.setState({projects:t.data.projects,total:t.data.pager.page,loading:!1})}catch(e){this.props.openSnackBar("获取已有作品时出现问题: "+e.message,"error"),this.props.onClose()}}async getPinned(){try{let{data:e}=await C.Z.get("user/getPinned?id=".concat(this.props.myself.id)),{projects:s}=e,t=new Set;for(let e of s)t.add(e.id);this.setState({pinned:Array.from(t)})}catch(e){this.props.openSnackBar("获取置顶作品时出现问题: "+e.message,"error"),this.props.onClose()}}async handleClick(e,s){try{s?await C.Z.post("user/deletePinned",{id:e}):await C.Z.post("user/pinProject",{id:e}),this.props.openSnackBar("置顶成功!","success"),this.props.onClose()}catch(e){this.props.openSnackBar("置顶失败："+e.message,"error")}}render(){return(0,r.jsxs)(b.ZP,{className:P().modal,closeButton:!0,open:this.props.open,onClose:this.props.onClose,onOpen:()=>{this.getSelfProject(),this.getPinned()},"aria-labelledby":"pin-modal",children:[(0,r.jsx)(b.ZP.Header,{children:(0,r.jsxs)(c.Z,{id:"modal-title",size:21,children:[(0,r.jsx)(w.Z,{size:70,color:"#ffd882"}),"修改作品橱窗",(0,r.jsx)(c.Z,{size:14,color:"#a1a1a1",children:"选择作品放入橱窗内"})]})}),(0,r.jsxs)(b.ZP.Body,{children:[(0,r.jsx)(y.Z,{column:!0,grid:1,showAuthor:!1,isLoading:this.state.loading,onClick:this.handleClick,projectData:this.state.projects,activated:this.state.pinned}),!this.state.loading&&this.state.total>1&&(0,r.jsx)(k.ZP,{initialPage:this.state.page,onChange:e=>{this.handleChangePage(e)},total:this.state.total})]})]})}constructor(e){super(e),this.state={loading:!1,projects:[],page:1,pinned:[]},S()(this,["getSelfProject","handleClick","handleChangePage","getPinned"])}}var I=(0,p.$j)(e=>({myself:e.auth.user.userInfo}),e=>({openSnackBar:(s,t)=>e((0,h.jW)(t,s))}))(z),L=t(84551),$=t(51788),E=t(25156);t(63059);var B=t(43009),O=t.n(B),F=t(28386),T=t(94184),D=t.n(T),R=t(44012),U=t(74806),V=t(54490),W=t(75215),H=t(46414),J=t(80534),A=t(9008),X=t.n(A),G=t(12120);let{publicRuntimeConfig:Q}=m()();class Y extends i.Component{handleUpdateIntro(e){C.Z.post("user/updateIntro",{intro:e}).catch(e=>{})}handleReport(){if(!this.props.isLogin){this.props.openSnackBar("请登录后进行举报","error");return}this.setState({reportModalOpen:!0})}async handleFollow(){try{await C.Z.post("/user/follow",{id:this.props.user.id}),this.props.openSnackBar("关注成功！","success"),this.setState({isFollowing:!0})}catch(e){this.props.openSnackBar("关注失败: "+e.response.data.message,"error")}}render(){let{user:e,isLogin:s,myself:t,projects:i,userBanned:p}=this.props,h=this.props.intl;return p?(0,r.jsx)(H.default,{errorMessage:h.formatMessage({id:"user.banned",defaultMessage:"该用户因为违反社区相关规定，已被禁止访问。"})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(X(),{children:[(0,r.jsx)("meta",{property:"og:title",content:e.name}),(0,r.jsx)("meta",{property:"og:site_name",content:"别针社区"}),(0,r.jsx)("meta",{property:"og:type",content:"website"}),(0,r.jsx)("meta",{property:"og:description",content:(0,G.Z)(e.intro).replace(/\n/g,"")}),(0,r.jsx)("meta",{property:"og:image",content:"".concat(e.avatar?"".concat(Q.backend,"user/avatar/").concat(e.avatar):"".concat("https://codingclip.com","/img/default-avatar.png"))}),(0,r.jsx)("link",{rel:"canonical",href:"".concat("https://codingclip.com","/user/").concat(e.id)})]}),(0,r.jsx)(n.Z,{css:{paddingTop:"20px"},className:"container",fluid:!0,children:(0,r.jsx)("div",{children:(0,r.jsx)(o.ZP.Container,{children:(0,r.jsxs)(o.ZP,{xs:20,className:O().content,children:[(0,r.jsxs)(a.ZP,{className:O().card,children:[(0,r.jsxs)("div",{className:O().info,children:[(0,r.jsxs)("div",{className:O().row,style:{alignItems:"center"},children:[(0,r.jsx)("div",{className:O().avatar,children:(0,r.jsx)(W.Z,{name:e.name,avatar:e.avatar,size:120})}),(0,r.jsxs)("div",{className:O().column,children:[(0,r.jsxs)("div",{className:O().row,children:[(0,r.jsx)(c.Z,{b:!0,size:32,children:e.name}),e.budge&&e.budge.length>=1&&(0,r.jsx)("div",{className:O().userbudge,children:e.budge.map(e=>(0,r.jsx)(l.ZP,{content:e.name,children:(0,r.jsx)("div",{className:O().item,children:(0,r.jsx)("img",{src:e.icon,alt:e.name})})},e.id))}),(0,r.jsx)(d.Z,{x:.5}),0!==e.budge_type&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.ZP,{content:1===e.budge_type?"管理员":"知名Scratcher",children:(0,r.jsx)(E.Z,{color:1===e.budge_type?"purple":"green",children:e.budge_text})}),(0,r.jsx)(d.Z,{x:.5})]}),e.id!==(null==t?void 0:t.id)&&(0,r.jsx)("div",{className:O().reports,onClick:this.handleReport,children:(0,r.jsx)(l.ZP,{content:h.formatMessage({id:"general.report",defaultMessage:"举报"}),rounded:!0,children:(0,r.jsx)("span",{className:O().view,children:(0,r.jsx)(j.Zd,{set:"broken"})})})})]}),(0,r.jsx)(c.Z,{size:14,color:"#888888",children:null!==e.bio?e.bio:h.formatMessage({id:"user.bio",defaultMessage:"个人简介"})})]})]}),(0,r.jsx)("div",{className:D()(O().row,O().action),children:!1})]}),(0,r.jsx)(d.Z,{y:1}),(0,r.jsxs)("div",{className:O().description,children:[(0,r.jsxs)("div",{className:D()(O().column,O().introduction),children:[(0,r.jsxs)(c.Z,{size:21,b:!0,className:O().title,children:[(0,r.jsx)(j.LY,{}),(0,r.jsx)(R.Z,{id:"user.bio",defaultMessage:"个人简介"})]}),(0,r.jsx)(d.Z,{y:.5}),(0,r.jsx)($.Z,{content:e.intro,editable:s&&t.id===e.id,className:O().markdown,onUpdate:this.handleUpdateIntro})]}),(0,r.jsx)(d.Z,{x:1}),(0,r.jsxs)("div",{className:O().column,children:[(0,r.jsxs)("div",{className:D()(O().column,O().container),children:[(0,r.jsxs)("div",{className:O().header,children:[(0,r.jsxs)(c.Z,{size:21,b:!0,className:O().title,children:[(0,r.jsx)(j.rp,{}),(0,r.jsx)(R.Z,{id:"user.pinned",defaultMessage:"作品橱窗"})]}),s&&t.id===e.id&&(0,r.jsx)(u.ZP,{onClick:()=>{this.setState({pinModalOpen:!0})},children:(0,r.jsx)(R.Z,{id:"user.editPin",defaultMessage:"编辑"})})]}),(0,r.jsx)(d.Z,{y:.5}),(0,r.jsx)(y.Z,{isLoading:!1,projectData:this.props.pinned,column:!0,grid:1}),(0,r.jsx)(d.Z,{y:1})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)(c.Z,{size:21,b:!0,className:O().title,children:[(0,r.jsx)(j.n5,{}),(0,r.jsx)(R.Z,{id:"user.info",defaultMessage:"用户信息"})]}),(0,r.jsx)(c.Z,{color:"grey",size:15,children:(0,r.jsx)(R.Z,{id:"user.id",defaultMessage:"用户ID: {userId}",values:{userId:e.id}})}),(0,r.jsx)(c.Z,{color:"grey",size:15,children:(0,r.jsx)(R.Z,{id:"user.registrationtime",defaultMessage:"注册时间: {time}",values:{time:h.formatDate(e.created_at)}})}),e.ip_location&&(0,J.k)("showip")&&(0,r.jsx)(l.ZP,{content:h.formatMessage({id:"user.iplocation.info",defaultMessage:"显示用户最近使用IP属地信息，属地信息以运营商为准"}),children:(0,r.jsx)(c.Z,{color:"grey",size:15,children:(0,r.jsx)(R.Z,{id:"user.iplocation",defaultMessage:"IP属地：{iplocation}",values:{iplocation:h.formatMessage({id:e.ip_location})}})})})]})]})]})]}),(0,r.jsx)(d.Z,{y:1}),(0,r.jsx)(a.ZP,{className:O().projectlist,children:(0,r.jsx)(y.Z,{isLoading:!1,projectData:i,noShadow:!0,showAuthor:!1,children:(0,r.jsxs)("div",{className:O().header,children:[(0,r.jsxs)(c.Z,{size:20,children:[(0,r.jsx)("div",{className:O().icon,children:(0,r.jsx)(v(),{objectFit:"cover",layout:"fill",src:Z.Z,alt:h.formatMessage({id:"user.public_project",defaultMessage:"公开作品"})})}),(0,r.jsx)(R.Z,{id:"user.public_project",defaultMessage:"公开作品"})]}),(0,r.jsx)(u.ZP,{href:"/user/".concat(e.id,"/all-projects"),children:"查看更多"})]})})}),(0,r.jsx)(d.Z,{y:1}),(0,r.jsx)(a.ZP,{className:O().card,children:(0,r.jsx)(F.Z,{obj:"u".concat(e.id),myself:t})}),(0,r.jsx)(d.Z,{y:1})]})})})}),(0,r.jsx)(L.Z,{reportType:"u",reportId:e.id,open:this.state.reportModalOpen,onClose:()=>this.setState({reportModalOpen:!1})}),(0,r.jsx)(I,{open:this.state.pinModalOpen,onClose:()=>this.setState({pinModalOpen:!1})})]})}constructor(e){super(e),this.state={reportModalOpen:!1,pinModalOpen:!1,isFollowing:!1,markdown:""},S()(this,["handleUpdateIntro","handleReport","handleFollow"])}}Y.propTypes={user:_().object,myself:_().object,isLogin:_().bool};var q=!0,K=(0,U.ZP)((0,p.$j)(e=>({isLogin:e.auth.user.isLogin,myself:e.auth.user.userInfo}),e=>({openSnackBar:(s,t)=>e((0,h.jW)(t,s))}))(Y));(0,V.Em)({id:"title.user",defaultMessage:"用户"})},28380:function(e){e.exports={modal:"pin-modal_modal__eenu8",input:"pin-modal_input__CHBzr"}},40459:function(e){e.exports={badge:"user-budge_badge__2Vt_c",green:"user-budge_green__9gfQp",purple:"user-budge_purple__tNelf",red:"user-budge_red__po0jc"}},43009:function(e){e.exports={content:"user_content__mzQcJ",icon:"user_icon__8_g0O",userbudge:"user_userbudge__GLseB",item:"user_item__Jlizc",pagination:"user_pagination__cOmgM",projectlist:"user_projectlist__Iomue",card:"user_card__xiOh4",info:"user_info__DOU4J",avatar:"user_avatar___JVJc",header:"user_header__88yev",reports:"user_reports__WkFTu",view:"user_view__dh1mT",title:"user_title__bEA_S",ph:"user_ph__WYg5d",description:"user_description__EcAhG",column:"user_column___bjUg",action:"user_action__H7oIB",row:"user_row__1rjc9",special:"user_special__dVFr9",container:"user_container__8i_St",introduction:"user_introduction__xp1UJ",level:"user_level__Np_Rw",budge:"user_budge__RPBvL"}}},function(e){e.O(0,[9879,3662,6855,5527,4329,9418,9774,2888,179],function(){return e(e.s=74056)}),_N_E=e.O()}]);