(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5313],{43165:function(e,t,a){"use strict";a.d(t,{Z:function(){return l}});var n=a(67294),i=a(86212);let s=(0,i.zo)("div",{w:"100%",mr:"auto",ml:"auto",variants:{fluid:{true:{maxWidth:"100%"}},responsive:{true:{"@xs":{maxWidth:"$breakpoints$xs"},"@sm":{maxWidth:"$breakpoints$sm"},"@md":{maxWidth:"$breakpoints$md"},"@lg":{maxWidth:"$breakpoints$lg"},"@xl":{maxWidth:"$breakpoints$xl"}}}},defaultVariants:{fluid:!1,responsive:!0}});var r=a(85893);let o=({xs:e,sm:t,md:a,lg:i,xl:o,wrap:l,gap:c,as:d,display:p,justify:m,direction:g,alignItems:u,alignContent:h,children:f,responsive:x,fluid:$,css:v,..._})=>{let j=(0,n.useMemo)(()=>`calc(${c} * $space$sm)`,[c]);return(0,r.jsx)(s,{css:{px:j,maxWidth:e?"$breakpoints$xs":t?"$breakpoints$sm":a?"$breakpoints$md":i?"$breakpoints$lg":o?"$breakpoints$xl":"",alignItems:u,alignContent:h,flexWrap:l,display:p,justifyContent:m,flexDirection:g,...v},responsive:x,fluid:$,as:d,..._,children:f})};o.toString=()=>".nextui-container",o.defaultProps={gap:2,xs:!1,sm:!1,md:!1,lg:!1,xl:!1,responsive:!0,fluid:!1,wrap:"wrap",as:"div",display:"block"};var l=n.memo(o)},22553:function(e,t,a){"use strict";a.d(t,{ZP:function(){return h}});var n=a(67294),i=a(86212);(0,i.zo)("div",{});let s=(0,i.zo)("div",{margin:0,boxSizing:"border-box",padding:"$$gridGapUnit"});var r=a(61309),o=a(50088),l=a(85893);let c=e=>{let t=0===e?"none":"inherit";if("number"==typeof e){let a=100/12*e,n=a>100?"100%":a<0?"0":`${a}%`;return{flexGrow:0,display:t,maxWidth:n,flexBasis:n}}return{flexGrow:1,display:t,maxWidth:"100%",flexBasis:"0"}},d=n.forwardRef(({xs:e,sm:t,md:a,lg:i,xl:o,css:d,justify:p,direction:m,alignItems:g,alignContent:u,children:h,className:f,...x},$)=>{let v=(0,n.useMemo)(()=>{let n={xs:e,sm:t,md:a,lg:i,xl:o};return Object.keys(n).reduce((e,t)=>void 0!==n[t]&&!1!==n[t]?`${e} ${t}`:e,"").trim()},[e,t,a,i,o]);return(0,l.jsx)(s,{ref:$,className:(0,r.Z)("nextui-grid-item",v,f),css:{alignItems:g,alignContent:u,justifyContent:p,flexDirection:m,"&.xs":{...c(e)},"@xsMax":{"&.xs":{...c(e)}},"@sm":{"&.sm":{...c(t)}},"@md":{"&.md":{...c(a)}},"@lg":{"&.lg":{...c(i)}},"@xl":{"&.xl":{...c(o)}},...d},...x,children:h})});d.displayName="NextUI.GridItem",d.toString=()=>".nextui-grid-item";var p=(0,o.Z)(d,{xs:!1,sm:!1,md:!1,lg:!1,xl:!1,className:""});let m=n.forwardRef(({children:e,css:t,...a},n)=>(0,l.jsx)(p,{ref:n,css:{...t},...a,children:e}));m.displayName="NextUI.Grid",m.toString=()=>".nextui-grid";let g=n.forwardRef(({gap:e,wrap:t,css:a,children:i,className:s,...o},c)=>{let d=(0,n.useMemo)(()=>`calc(${e} * $space$3)`,[e]);return(0,l.jsx)(p,{ref:c,className:(0,r.Z)("nextui-grid-container",s),css:{$$gridGapUnit:d,display:"flex",flexWrap:t,boxSizing:"border-box",margin:"calc(-1 * $$gridGapUnit)",width:"calc(100% + $$gridGapUnit * 2)",...a},...o,children:i})});g.displayName="NextUI.GridContainer",g.toString=()=>".nextui-grid-container";var u=(0,o.Z)(g,{gap:0,wrap:"wrap",className:""});m.Container=u;var h=m},67344:function(e,t,a){"use strict";a.d(t,{ZP:function(){return Z}});var n=a(67294),i=a(96357);let s="dots";var r=({page:e,total:t,siblings:a=1,boundaries:r=1,initialPage:o=1,onChange:l})=>{let[c,d]=(0,n.useState)(e||o),p=e=>{d(e),l&&l(e)};(0,n.useEffect)(()=>{e&&e!==c&&d(e)},[e]);let m=(0,n.useCallback)(e=>{p(e<=0?1:e>t?t:e)},[t]);return{range:(0,n.useMemo)(()=>{if(2*a+3+2*r>=t)return(0,i.w)(1,t);let e=Math.max(c-a,r),n=Math.min(c+a,t-r),o=e>r+2,l=n<t-(r+1);if(!o&&l)return[...(0,i.w)(1,2*a+r+2),s,...(0,i.w)(t-(r-1),t)];if(o&&!l){let e=r+1+2*a;return[...(0,i.w)(1,r),s,...(0,i.w)(t-e,t)]}return[...(0,i.w)(1,r),s,...(0,i.w)(e,n),s,...(0,i.w)(t-r+1,t)]},[t,a,c]),active:c,setPage:m,next:()=>m(c+1),previous:()=>m(c-1),first:()=>m(1),last:()=>m(t)}},o=a(61309),l=a(50088),c=a(86212);let d=(0,c.F4)({"0%":{transform:"scale(1)"},"60%":{transform:"scale($$paginationScaleTransform)"},"100%":{transform:"scale(1)"}}),p=(0,c.zo)("svg",{color:"currentColor",stroke:"currentColor",variants:{isEllipsis:{true:{transform:"0deg"}},isBefore:{true:{}}},compoundVariants:[{isEllipsis:!0,isBefore:!0,css:{transform:"rotate(180deg)"}}]}),m=(0,c.zo)("svg",{transform:"rotate(180deg)",variants:{isPrev:{true:{transform:"rotate(0deg)"}}}}),g=(0,c.zo)("span",{position:"relative",display:"inline-flex",alignItems:"center",top:0,left:0,zIndex:"$2"}),u=(0,c.zo)("button",{border:"none",position:"relative",display:"inline-flex",margin:"0 $$paginationItemMargin",ai:"center",jc:"center",padding:0,boxSizing:"border-box",tt:"capitalize",us:"none",whiteSpace:"nowrap",ta:"center",verticalAlign:"middle",bs:"none",outline:"none",height:"$$paginationSize",minWidth:"$$paginationSize",fs:"inherit",cursor:"pointer",br:"$$paginationItemRadius",color:"$text",bg:"$accents0","@motion":{transition:"none"},"&:hover":{bg:"$accents1"},[`& ${m}`]:{size:"$$paginationFontSize"},[`& ${p}`]:{size:"$$paginationFontSize"},variants:{active:{true:{fontWeight:"$bold",cursor:"default",boxShadow:"$sm",[`& ${g}`]:{color:"$white"}}},disabled:{true:{color:"$accents4",cursor:"not-allowed"}},bordered:{true:{bg:"transparent",border:"$$paginationItemBorderWeight solid $accents2"}},onlyDots:{true:{}},preserveContent:{true:{}},animated:{true:{transition:"transform 0.25s ease 0s, background 0.25s ease 0s, box-shadow 0.25s ease 0s"},false:{transition:"none"}}},compoundVariants:[{onlyDots:!0,preserveContent:!1,css:{[`& ${g}`]:{display:"none"}}},{animated:!0,disabled:!1,active:!1,css:{"&:active":{transform:"scale($$paginationScaleTransform)",fs:"calc($$paginationFontSize * 0.9)"}}}]},c.xg),h=(0,c.zo)("div",{position:"absolute",contain:"strict",top:"0px",zIndex:"$1",bg:"$$paginationColor",br:"$$paginationItemRadius",height:"$$paginationSize",minWidth:"$$paginationSize",animationName:`${d}`,animationDirection:"normal","&.nextui-pagination-highlight--moving":{transform:"scale($$paginationScaleTransform)"},"@motion":{transition:"none","&.nextui-pagination-highlight--moving":{transform:"scale(1)"}},variants:{animated:{true:{animationDuration:"350ms",animationTimingFunction:"ease",transition:"left 350ms ease 0s, transform 300ms ease 0s"},false:{animationDuration:"none",animationTimingFunction:"none",transition:"none","&.nextui-pagination-highlight--moving":{transform:"scale(1)"}}},noMargin:{true:{br:"$squared"}},rounded:{true:{}},shadow:{true:{normalShadowVar:"$$paginationShadowColor"}}},compoundVariants:[{rounded:!0,noMargin:!0,css:{br:"$pill"}}]}),f=(0,c.zo)("nav",{m:0,p:0,d:"inline-flex",position:"relative",fontVariant:"tabular-nums",fontFeatureSettings:"tnum",variants:{color:{default:{$$paginationColor:"$colors$primary",$$paginationShadowColor:"$colors$primaryShadow"},primary:{$$paginationColor:"$colors$primary",$$paginationShadowColor:"$colors$primaryShadow"},secondary:{$$paginationColor:"$colors$secondary",$$paginationShadowColor:"$colors$secondaryShadow"},success:{$$paginationColor:"$colors$success",$$paginationShadowColor:"$colors$successShadow"},warning:{$$paginationColor:"$colors$warning",$$paginationShadowColor:"$colors$warningShadow"},error:{$$paginationColor:"$colors$error",$$paginationShadowColor:"$colors$errorShadow"},gradient:{$$paginationColor:"$colors$gradient",$$paginationShadowColor:"$colors$primaryShadow"}},size:{xs:{$$paginationWidth:"$space$10",$$paginationFontSize:"$space$5",fs:"$$paginationFontSize"},sm:{$$paginationWidth:"$space$12",$$paginationFontSize:"$space$6",fs:"$$paginationFontSize"},md:{$$paginationWidth:"$space$13",$$paginationFontSize:"$space$7",fs:"$$paginationFontSize"},lg:{$$paginationWidth:"$space$14",$$paginationFontSize:"$space$8",fs:"$$paginationFontSize"},xl:{$$paginationWidth:"$space$15",$$paginationFontSize:"$space$9",fs:"$$paginationFontSize"}},borderWeight:{light:{$$paginationItemBorderWeight:"$borderWeights$light"},normal:{$$paginationItemBorderWeight:"$borderWeights$normal"},bold:{$$paginationItemBorderWeight:"$borderWeights$bold"},extrabold:{$$paginationItemBorderWeight:"$borderWeights$extrabold"},black:{$$paginationItemBorderWeight:"$borderWeights$black"}},bordered:{true:{}},onlyDots:{true:{$$paginationSize:"calc($$paginationWidth / 2)",$$paginationItemRadius:"$radii$pill",$$paginationScaleTransform:1.05},false:{$$paginationSize:"$$paginationWidth",$$paginationScaleTransform:1.1}},rounded:{true:{$$paginationItemRadius:"$radii$pill"},false:{$$paginationItemRadius:"$radii$squared"}},noMargin:{true:{$$paginationItemRadius:"0px",$$paginationItemMargin:"0",[`& ${u}:first-of-type`]:{btlr:"$squared",bblr:"$squared"},[`& ${u}:last-of-type`]:{btrr:"$squared",bbrr:"$squared"}},false:{$$paginationItemMargin:"$space$1"}}},compoundVariants:[{bordered:!0,noMargin:!0,css:{[`& ${u}:not(:last-child)`]:{borderRight:0}}},{noMargin:!0,rounded:!0,css:{$$paginationItemRadius:"0px"}},{rounded:!1,noMargin:!0,css:{$$paginationItemRadius:"0px"}}],defaultVariants:{color:"default",size:"md",borderWeight:"normal",onlyDots:!1,noMargin:!1,rounded:!1}});var x=a(85893);let $=e=>{if(e)switch(e){case s:return"dots element";case"<":return"previous page button";case">":return"next page button";case"first":return"first page button";case"last":return"last page button";default:return`${e} item`}},v="nextui-pagination-item",_=({active:e,value:t,children:a,disabled:i,animated:s,bordered:r,onClick:l,onlyDots:c,preserveContent:d,...p})=>{let m=(0,n.useMemo)(()=>e?`${$(t)} active`:$(t),[t,e]);return(0,x.jsx)(u,{className:(0,o.Z)(v,{[`${v}-active`]:e,[`${v}-animated`]:s,[`${v}-disabled`]:i,[`${v}-bordered`]:r,[`${v}-only-dots`]:c,[`${v}-preserve-content`]:d}),animated:s,active:e,disabled:i,bordered:r,onlyDots:c,preserveContent:d,onClick:e=>{i||l&&l(e)},"aria-label":m,tabIndex:i?-1:0,...p,children:(0,x.jsx)(g,{className:`${v}-content`,children:a})})};_.toString=()=>".nextui-pagination-item";var j=(0,l.Z)(_,{preserveContent:!1}),b=({value:e,isBefore:t,onlyDots:a,animated:i,bordered:s,onClick:r})=>{let[o,l]=(0,n.useState)(!1);return(0,x.jsx)(j,{value:e,onlyDots:a,animated:i,bordered:s,onClick:e=>r&&r(e),onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),children:(0,x.jsxs)(p,o?{role:"presentation",focusable:"false",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",shapeRendering:"geometricPrecision",className:"nextui-pagination-ellipsis",isEllipsis:!0,isBefore:t,children:[(0,x.jsx)("path",{d:"M13 17l5-5-5-5"}),(0,x.jsx)("path",{d:"M6 17l5-5-5-5"})]}:{viewBox:"0 0 24 24",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",shapeRendering:"geometricPrecision",isEllipsis:!1,isBefore:t,children:[(0,x.jsx)("circle",{cx:"12",cy:"12",r:"1",fill:"currentColor"}),(0,x.jsx)("circle",{cx:"19",cy:"12",r:"1",fill:"currentColor"}),(0,x.jsx)("circle",{cx:"5",cy:"12",r:"1",fill:"currentColor"})]})})};let k=({isPrev:e,disabled:t,onlyDots:a,animated:n,bordered:i,onClick:s,...r})=>(0,x.jsx)(j,{preserveContent:!0,value:e?"<":">",bordered:i,animated:n,onlyDots:a,disabled:t,onClick:e=>s&&s(e),children:(0,x.jsx)(m,{role:"presentation",focusable:"false",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"nextui-pagination-icon",isPrev:e,...r,children:(0,x.jsx)("path",{d:"M15.5 19l-7-7 7-7",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})})});k.toString=()=>".nextui-pagination-icon";let y=n.memo(k);var w=a(65463);let C="nextui-pagination-highlight",S=({active:e,shadow:t,noMargin:a,rounded:i,css:s,...r})=>{let[l,c]=(0,n.useState)(e),[d,p]=(0,n.useState)("");(0,n.useEffect)(()=>{if(e!==l){c(e),p(`${C}--moving`);let t=setTimeout(()=>{p(""),clearTimeout(t)},350)}},[e]);let m=(0,n.useMemo)(()=>a?`var(--nextui--paginationSize) * ${l}`:`var(--nextui--paginationSize) * ${l} + ${4*l+2}px`,[l,a]);return(0,x.jsx)(h,{"aria-hidden":!0,shadow:t,rounded:i,className:(0,o.Z)(C,d,{[`${C}--rounded`]:i,[`${C}--active`]:e,[`${C}--no-margin`]:a,[`${C}--shadow`]:t},r.className),noMargin:a,style:(0,w.dG)({"--nextui--paginationLeft":`calc(${m})`},(null==r?void 0:r.style)||{}),css:{left:"var(--nextui--paginationLeft)",...s},...r})};S.toString=()=>".nextui-pagination-highlight";var M=a(3569);let z="nextui-pagination",N=({page:e,initialPage:t,onlyDots:a,total:i,loop:l,siblings:c,boundaries:d,shadow:p,animated:m,bordered:g,dotsJump:u,controls:h,noMargin:$,onChange:v,rounded:_,...k})=>{let{range:w,active:C,setPage:M,previous:N,next:Z,first:D,last:E}=r({page:e,initialPage:t,siblings:a?10:c,boundaries:a?10:d,total:i,onChange:v}),P=(0,n.useCallback)((e,t)=>{if(e===s){let n=t<w.indexOf(C);return(0,x.jsx)(b,{value:e,bordered:g,animated:m,isBefore:n,onlyDots:a,onClick:()=>M(n?C-u>=1?C-u:1:C+u<=i?C+u:i)},`${z}-item-${e}-${t}`)}return(0,x.jsx)(j,{value:e,animated:m,bordered:g,active:e===C,onClick:()=>e!==C&&M(e),onlyDots:a,children:e},`${z}-item-${e}-${t}`)},[i,a,C,g,m]);return(0,x.jsxs)(f,{noMargin:$,bordered:g,rounded:_,onlyDots:a,className:(0,o.Z)(z,{[`${z}--no-margin`]:$,[`${z}--bordered`]:g,[`${z}--shadow`]:p,[`${z}--rounded`]:_}),...k,children:[h&&(0,x.jsx)(y,{isPrev:!0,bordered:g,animated:m,onlyDots:a,onClick:()=>l&&1===C?E():N(),disabled:!l&&1===C}),(0,x.jsx)(S,{noMargin:$,animated:m,shadow:p,rounded:_,active:h?w.indexOf(C)+1:w.indexOf(C)}),w.map(P),h&&(0,x.jsx)(y,{bordered:g,animated:m,onlyDots:a,onClick:()=>l&&C===i?D():Z(),disabled:!l&&C===i})]})};N.defaultProps={shadow:!1,controls:!0,bordered:!1,initialPage:1,siblings:1,boundaries:1,dotsJump:5,total:1,loop:!1,animated:!0,onlyDots:!1,noMargin:!1,rounded:!1},M.Ts&&(N.displayName="NextUI.Pagination"),N.toString=()=>".nextui-pagination";var Z=n.memo(N)},96357:function(e,t,a){"use strict";function n(e,t,a){return 100*(e-t)/(a-t)}function i(e,t){let a=t-e+1;return Array.from({length:a},(t,a)=>a+e)}a.d(t,{R:function(){return n},w:function(){return i}})},60166:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/messages",function(){return a(58109)}])},51788:function(e,t,a){"use strict";var n=a(85893),i=a(24002),s=a(39359),r=a(38522),o=a(92084),l=a(5622),c=a.n(l),d=a(67294),p=a(94184),m=a.n(p),g=a(34017),u=a(79592),h=a.n(u);t.Z=e=>{let{content:t,placeholder:a,editable:l,onUpdate:p,minRow:u,row:f,html:x=!1,headless:$=!1,initial:v=!1,lock:_=!1}=e,[j,b]=(0,d.useState)(v),[k,y]=(0,d.useState)(t),w=()=>c()({ignoreMissing:!0});return((0,d.useEffect)(()=>{y(t)},[t]),$)?(0,n.jsx)(i.D,{remarkPlugins:[s.Z,r.Z],remarkRehypeOptions:{ignoreMissing:!0},rehypePlugins:[o.Z,w],className:m()(h().render,"markdown-body"),linkTarget:"_blank",children:k}):(0,n.jsx)(n.Fragment,{children:j?(0,n.jsx)(g.Z,{fullWidth:!0,initialValue:k,autoFocus:!0,className:h().textarea,rows:f,onBlur:e=>{p&&k!=e.target.value&&p(e.target.value),y(e.target.value),_||b(!1)}}):(0,n.jsx)("div",{className:h().box,onClick:()=>{!_&&l&&b(!0)},children:(0,n.jsx)(i.D,{remarkPlugins:[s.Z],rehypePlugins:[w],className:m()(h().render,"markdown-body",{[h().placeholder]:""===k}),linkTarget:"_blank",children:""===k?a:k})})})}},80182:function(e,t,a){"use strict";var n=a(85893),i=a(65643),s=a(41664),r=a.n(s),o=a(11163),l=a(67294),c=a(15477),d=a(94184),p=a.n(d),m=a(16639),g=a.n(m);t.Z=function(e){let{navigations:t}=e,a=(0,o.useRouter)(),[s,d]=(0,l.useState)(-1);return(0,n.jsx)(i.ZP,{className:g().card,children:t.map((e,t)=>(0,n.jsxs)("div",{className:p()(g().nav,{[g().open]:!0}),children:[(0,n.jsxs)("div",{className:p()(g().item,{[g().active]:a.pathname===e.link}),children:[e.link?(0,n.jsxs)(r(),{href:e.link,passHref:!0,className:g().itemlink,children:[e.icon,e.text]}):(0,n.jsxs)("a",{className:g().itemlink,onClick:()=>d(s===t?-1:t),children:[e.icon,e.text]}),e.item&&(0,n.jsx)("div",{onClick:()=>d(s===t?-1:t),style:{display:"flex"},children:s===t?(0,n.jsx)(c.Kh,{}):(0,n.jsx)(c._M,{})})]}),e.item&&(0,n.jsx)("div",{className:g().content,children:e.item.map((e,t)=>(0,n.jsxs)(r(),{href:e.link,passHref:!0,className:p()({[g().active]:a.pathname.replace("[pid]",a.query.pid)===e.link}),children:[e.icon,e.text]},t))})]},t))})}},9932:function(e,t,a){"use strict";var n=a(85893);a(67294);var i=a(45697),s=a.n(i),r=a(41664),o=a.n(r),l=a(89755),c=a.n(l),d=a(65643),p=a(42495),m=a(53856),g=a(90069),u=a.n(g),h=a(11752),f=a.n(h),x=a(75215),$=a(15477),v=a(27484),_=a.n(v),j=a(94184),b=a.n(j),k=a(30150);let{publicRuntimeConfig:y}=f()(),w=e=>{var t,a;let{onClickSettings:i,projectInfo:s={id:1,updated_at:"2022-01-28T10:19:46.972+08:00",plays:0,favorites:0,name:"Example Project",user_name:"SinanGentoo"},optimizedImage:r=!1,showAuthor:l,canEdit:g,activated:h,onDelete:f,onClick:v}=e;return(0,n.jsx)(d.ZP,{shadow:!1,clickable:!0,className:b()(u().overlay,{[u().activated]:h}),children:(0,n.jsxs)("div",{className:u().content,children:[v?(0,n.jsx)("a",{className:u().projectImage,onClick:()=>{v(s.id,h)},children:(0,n.jsx)(c(),{priority:!0,unoptimized:!r,src:"".concat(y.backend,"project/thumbnail?id=").concat(s.id),alt:s.title,layout:"fixed",objectFit:"cover",width:"100%",height:"1px",className:u().image,draggable:!1})}):(0,n.jsx)(o(),{href:"/project/".concat(s.id),className:u().projectImage,target:"_blank",children:(0,n.jsx)(c(),{priority:!0,unoptimized:!r,src:"".concat(y.backend,"project/thumbnail?id=").concat(s.id),alt:s.name,layout:"fixed",objectFit:"cover",width:"100%",height:"1px",className:u().image,draggable:!1})}),(0,n.jsxs)("div",{className:u().projectInfo,children:[(0,n.jsxs)("div",{children:[v?(0,n.jsx)("a",{className:u().projectName,onClick:()=>{v(s.id,h)},children:null===(t=s.name)||void 0===t?void 0:t.trim()}):(0,n.jsx)(o(),{href:"/project/".concat(s.id),className:u().projectName,target:"_blank",children:null===(a=s.name)||void 0===a?void 0:a.trim()}),(0,n.jsxs)("div",{className:u().projectStatus,children:[(0,n.jsx)("div",{className:u().time,title:_()(s.content_update_at).format("LLLL"),children:(0,n.jsxs)(p.ZP,{content:"修改时间",rounded:!0,children:[(0,n.jsx)($.b7,{set:"broken",size:"small"})," ",_()(s.content_update_at).fromNow()]})}),(0,n.jsx)("div",{className:u().views,children:(0,n.jsx)(p.ZP,{content:"观看量",rounded:!0,children:(0,n.jsxs)("span",{className:u().view,children:[(0,n.jsx)($.di,{set:"broken",size:"small"})," ",(0,k.Z)(s.plays)]})})})]})]}),l&&(0,n.jsxs)("div",{className:u().projectAvatar,children:[(0,n.jsx)("div",{className:u().avatar,children:(0,n.jsx)(x.Z,{size:25,avatar:s.user_avatar,name:s.user_name})}),(0,n.jsx)("div",{className:u().authorInfo,children:(0,n.jsx)(o(),{href:"/user/".concat(s.user),passHref:!0,target:"_blank",children:s.user_name})})]}),g&&(0,n.jsx)("div",{className:u().projectAction,children:(0,n.jsxs)(m.ZP.Group,{size:"sm",bordered:!0,children:[(0,n.jsx)(m.ZP,{title:"设置",auto:!0,onClick:()=>i(s.id),children:(0,n.jsx)($.pE,{})}),(0,n.jsx)(m.ZP,{title:"删除",auto:!0,onClick:()=>f(s),children:(0,n.jsx)($.HG,{})})]})})]})]})})};w.propTypes={projectInfo:s().object.isRequired,optimizedImage:s().bool},t.Z=w},80432:function(e,t,a){"use strict";a.d(t,{Z:function(){return h}});var n=a(85893),i=a(15477),s=a(22553),r=a(65643),o=a(56064),l=a(54490),c=a(86896),d=a(80182),p=a(63059),m=a(41193),g=a.n(m);let u=(0,l.vU)({messageCenter:{id:"navigations.messagecenter",defaultMessage:"消息中心"},at:{id:"navigations.at",defaultMessage:"提到我的"},reply:{id:"navigations.reply",defaultMessage:"回复"},comment:{id:"navigations.comment",defaultMessage:"评论"},system:{id:"navigations.system",defaultMessage:"系统通知"},creativeCenter:{id:"title.projects",defaultMessage:"作品"},favorite:{id:"navigations.favorite",defaultMessage:"收藏"},settings:{id:"navigations.settings",defaultMessage:"设置"}});function h(e){let{showItem:t,hideBackground:a,children:l}=e,m=(0,c.Z)(),h=[{icon:(0,n.jsx)(i.P_,{set:"bold",primaryColor:"rgb(251, 192, 45)"}),text:m.$t(u.messageCenter),item:t&&[{text:m.$t(u.at),link:"/messages/at"},{text:m.$t(u.reply),link:"/messages/reply"},{text:m.$t(u.comment),link:"/messages/comment"},{text:m.$t(u.system),link:"/messages/system"}],link:!t&&"/messages"},{icon:(0,n.jsx)(i.gt,{set:"bold",primaryColor:"#448aff"}),text:m.$t(u.creativeCenter),link:"/stuff"},{icon:(0,n.jsx)(i.rp,{set:"bold",primaryColor:"rgb(216, 27, 96)"}),text:m.$t(u.favorite),link:"/favorite"},{icon:(0,n.jsx)(i.pE,{set:"bold",primaryColor:"rgb(84, 110, 122)"}),text:m.$t(u.settings),link:"/settings"}],f=(0,o.oR)(),{isLogin:x}=f.getState().auth.user;return x?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.ZP,{xs:100,sm:3,lg:2,md:2,css:{display:"block!important"},children:(0,n.jsx)(d.Z,{navigations:h})}),(0,n.jsx)(s.ZP,{xs:100,sm:8,lg:8,md:8,justify:"center",wrap:"wrap",css:{minHeight:"550px"},children:a?l:(0,n.jsx)(r.ZP,{className:g().card,children:l})})]}):(0,n.jsx)(p.Z,{login:!0})}},58109:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return U}});var n=a(85893),i=a(67294),s=a(80432),r=a(56064),o=a(63059),l=a(16641),c=a.n(l),d=a(45697),p=a.n(d),m=a(2970),g=a(9693),u=a(97501),h=a(65643),f=a(86979),x=a(53856),$=a(75215),v=a(9932),_=a(44030),j=a.n(_),b=a(27484),k=a.n(b),y=a(94184),w=a.n(y),C=a(63763),S=a(51788),M=a(54490),z=a(44012),N=a(74806);let Z=(0,M.vU)({mention:{id:"message.mention",defaultMessage:"\uD83D\uDCE2 在社区中提到了你"},reply:{id:"message.reply",defaultMessage:"\uD83D\uDCAC 回复了你： {content}"},replyProject:{id:"message.replyProject",defaultMessage:"\uD83D\uDCAC 回复了你的作品： {content}"},like:{id:"message.like",defaultMessage:"❤️ 给你的作品 {content} 点赞了"},mentionProject:{id:"message.mentionProject",defaultMessage:"\uD83D\uDCE2 在 {content} 中提到了你"},remix:{id:"message.remix",defaultMessage:"\uD83C\uDF31 改编了你的作品 {content}"},replyUser:{id:"message.replyUser",defaultMessage:"\uD83C\uDF49 在你的个人主页下回复了 {content}"},union:{id:"message.union",defaultMessage:"\uD83E\uDD1D  邀请你在 {content} 进行联合投稿"},system:{id:"message.system",defaultMessage:"\uD83D\uDD14  系统消息：{content}"},userUpdate:{id:"message.userUpdate",defaultMessage:"\uD83C\uDFAF 你关注的 Scratcher 迭代了作品{content}"},unknown:{id:"message.unknown",defaultMessage:"\uD83E\uDD14 未知消息：{content}"},accepts:{id:"invite.accepted",defaultMessage:"已接受！"},alreadyAccept:{id:"invite.alreadyAccept",defaultMessage:"你已经接受过啦..."},reject:{id:"invite.reject",defaultMessage:"你已经接受过啦..."}}),D=(e,t)=>{switch(e.type){case 10:case 32:return{type:"@消息",message:t.$t(32===e.type?Z.mention:Z.mentionProject,{content:e.content})};case 20:case 30:case 34:let a,n;let i=e.content.split(".")[1];return e.extra_data&&JSON.parse(e.extra_data).comment_id&&(i=JSON.parse(e.extra_data).comment_id),20===e.type?a=Z.reply:30===e.type?(a=Z.replyProject,n="/project/".concat(e.link.slice(1),"#comment-").concat(i)):(a=Z.replyUser,n="/user/".concat(e.link.slice(1),"#comment-").concat(i)),{type:"评论消息",link:n,message:t.$t(a,{content:e.content})};case 31:return{type:"点赞消息",message:t.$t(Z.like,{content:e.content})};case 33:return{type:"改编",message:t.$t(Z.remix,{content:e.content})};case 44:return{type:"联合投稿",message:t.$t(Z.union,{content:e.content})};case 40:return{type:"系统消息",message:t.$t(Z.system,{content:e.content})};case 50:return{type:"用户更新",message:t.$t(Z.userUpdate,{content:e.content})};default:return{type:"未知消息",message:t.$t(Z.unknown,{content:JSON.stringify(e)})}}};class E extends i.Component{async componentDidMount(){let{message:e}=this.props,{content:t}=this.state,a=0;"user"!==this.content&&(a="project"===t?e.link.slice(1):e.invite_effect_project);try{if(e.has_read||C.Z.post("siteMessages/setReaded",{id:e.id}),0!==a)try{let{data:e}=await C.Z.get("project/getDetail?id=".concat(a));this.setState({project:e})}catch(e){this.setState({project:"failed"})}}catch(e){console.error(e)}}render(){let{message:e}=this.props,{project:t,read:a}=this.state,i=this.state.from,s=this.state.content,r=D(e,this.props.intl);return(0,n.jsx)("div",{className:j().card,alt:r.type,children:(0,n.jsxs)(h.ZP,{className:j().content,children:[(0,n.jsx)("div",{className:j().from,children:"user"===i?(0,n.jsxs)("div",{className:j().user,children:[(0,n.jsx)($.Z,{passHref:!0,size:30,user:e.from,name:e.from_user,avatar:e.from_user_avatar}),(0,n.jsx)(g.Z,{x:.5}),(0,n.jsx)(f.Z,{children:e.from_user}),(0,n.jsx)(g.Z,{x:.2}),(0,n.jsx)(f.Z,{color:"#888888",children:k()(e.created_at).fromNow()})]}):(0,n.jsxs)("div",{className:j().user,children:[(0,n.jsx)($.Z,{size:30,user:1,name:this.props.intl.$t({id:"message.communityOfficial",defaultMessage:"社区官方"}),avatar:"1.jpeg"}),(0,n.jsx)(g.Z,{x:.5}),(0,n.jsx)(f.Z,{children:(0,n.jsx)(z.Z,{id:"message.communityOfficial",defaultMessage:"社区官方"})}),(0,n.jsx)(g.Z,{x:.2}),(0,n.jsx)(f.Z,{color:"#888888",children:k()(e.created_at).fromNow()})]})}),(0,n.jsxs)("div",{className:w()(j().project,{[j().clickable]:"union"!==s&&"system"!==s}),onClick:()=>{if("union"!==s&&"system"!==s){if(r.link)return window.open(r.link);window.open("".concat(s,"/").concat(e.link.slice(1))),this.setState({read:!0})}},children:[40===e.type?(0,n.jsx)(S.Z,{headless:!0,content:r.message,className:w()({[j().highlight]:!e.has_read&&!a})}):(0,n.jsx)(f.Z,{className:w()({[j().highlight]:!e.has_read&&!a}),children:r.message}),(0,n.jsx)(g.Z,{y:.5}),"project"===s&&"failed"!==t&&("loading"===t?(0,n.jsx)("div",{className:j().loading,children:(0,n.jsx)(u.ZP,{})}):(0,n.jsx)("div",{className:j().projectCard,onClick:e=>e.preventDefault(),onTouchStart:e=>e.preventDefault(),children:(0,n.jsx)(v.Z,{showAuthor:!0,projectInfo:t})})),"user"===s&&(0,n.jsxs)("div",{className:j().userInfo,onClick:e=>e.preventDefault(),onTouchStart:e=>e.preventDefault(),children:[(0,n.jsx)($.Z,{passHref:!0,size:60,user:parseInt(e.link.slice(1)),name:e.link.slice(1),avatar:e.to_user_avatar}),(0,n.jsx)(g.Z,{x:.5}),(0,n.jsxs)("div",{className:j().text,children:[(0,n.jsx)(f.Z,{b:!0,size:18,children:e.to_user}),(0,n.jsx)(f.Z,{size:14,color:"#888888",children:e.to_user_bio})]})]}),"union"===s&&("loading"===t?(0,n.jsx)("div",{className:j().loading,children:(0,n.jsx)(u.ZP,{})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:j().projectCard,children:(0,n.jsx)(v.Z,{showAuthor:!0,projectInfo:t})}),(0,n.jsxs)("div",{className:j().button,children:[(0,n.jsx)(x.ZP,{auto:!0,onPress:async()=>{try{await C.Z.post("/project/acceptInvite",{invite_id:e.link.slice(1)}),window.clipSnackbar("success",this.props.intl.$t(Z.accepts))}catch(e){"invite already accepted"===e.response.data.message?window.clipSnackbar("warning",this.props.intl.$t(Z.alreadyAccept)):window.clipSnackbar("error","接受失败: "+e.message)}},children:(0,n.jsx)(z.Z,{id:"general.accept",defaultMessage:"接受"})}),(0,n.jsx)(g.Z,{x:.5}),(0,n.jsx)(x.ZP,{auto:!0,color:"normal",onClick:()=>{window.clipSnackbar("success",this.props.intl.$t(Z.reject))},children:"拒绝"})]})]}))]})]})})}constructor(e){super(e),this.state={project:"loading",from:e.message.type<40?"user":"system",content:"unknown",read:e.message.has_read},e.message.link.startsWith("u")?this.state.content="user":44===e.message.type?this.state.content="union":40===e.message.type?this.state.content="system":this.state.content="project"}}var P=(0,N.ZP)(E),F=a(4865),I=a.n(F);class W extends i.Component{render(){let{messages:e,isLoading:t}=this.props;return(0,n.jsxs)("div",{className:I().overlay,children:[(0,n.jsx)(g.Z,{y:.5}),(0,n.jsx)("div",{className:w()(I().list,{[I().loading]:t,[I().empty]:0===e.length&&!t}),children:t?(0,n.jsx)(u.ZP,{}):0===e.length?(0,n.jsxs)("div",{className:I().empty,children:[(0,n.jsx)(m.Z,{size:100,mood:"shocked",color:"#FFD882"}),(0,n.jsx)("p",{children:"别针的小背包有点空"}),(0,n.jsx)("p",{children:"快点去填补这里的空白吧"})]}):(0,n.jsx)(n.Fragment,{children:e.map((e,t)=>(0,n.jsx)(P,{message:e},t))})})]})}}W.propTypes={messages:p().array},W.defaultProps={messages:[],isLoading:!1};var L=a(49872),R=a.n(L),B=a(43165),T=a(22553),A=a(67344);class H extends i.Component{async fetchMessages(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;try{this.setState({isLoading:!0});let{data:t}=await C.Z.get("/siteMessages/get?unread=0&limit=10&page=".concat(e));this.setState({messages:t.messages,total:t.pager.page,isLoading:!1})}catch(e){window.clipSnackbar("error","获取消息失败：".concat(e.message))}}componentDidMount(){this.fetchMessages()}componentDidUpdate(e){this.props.isLogin!==e.isLogin&&this.fetchMessages()}render(){return this.props.isLogin?(0,n.jsx)(B.Z,{css:{paddingTop:"20px",paddingBottom:"20px"},fluid:!0,children:(0,n.jsx)(T.ZP.Container,{gap:2,justify:"center",children:(0,n.jsx)(s.Z,{hideBackground:!0,children:(0,n.jsxs)("div",{className:c().content,children:[(0,n.jsx)(W,{isLoading:this.state.isLoading,messages:this.state.messages}),!this.state.isLoading&&this.state.total>1&&(0,n.jsx)("div",{className:c().pagination,children:(0,n.jsx)(A.ZP,{shadow:!0,total:this.state.total,initialPage:this.state.page,noMargin:!0,onChange:e=>{this.setState({page:e}),this.fetchMessages(e)}})})]})})})}):(0,n.jsx)(o.Z,{login:!0})}constructor(e){super(e),this.state={isLoading:!0,messages:[],page:1,total:0},R()(this,["fetchMessages"])}}var U=(0,r.$j)(e=>({isLogin:e.auth.user.isLogin}))(H)},30150:function(e,t,a){"use strict";function n(e){let t="";return e>=1e3&&(e=(e/1e3).toFixed(1),t="k",e>=10&&(e=(e/10).toFixed(1),t="w",e>=100&&(e=(e/100).toFixed(1),t="M",e>=1e3&&(e=(e/1e3).toFixed(1),t="G")))),parseFloat(e)+t}a.d(t,{Z:function(){return n}})},79592:function(e){e.exports={box:"markdown_box__TfpZw",render:"markdown_render__w4rvS",placeholder:"markdown_placeholder__bD6ms",textarea:"markdown_textarea__YGkOA"}},16639:function(e){e.exports={nav:"navigations_nav__Dj1uT",card:"navigations_card__T2l2M",content:"navigations_content__lkmCj",item:"navigations_item__eITyE",open:"navigations_open__uyJp_",active:"navigations_active__hLvj7"}},44030:function(e){e.exports={from:"message-card_from__v_Mci",user:"message-card_user__vKduo",clickable:"message-card_clickable__1Cx80",content:"message-card_content__Bx2ME",highlight:"message-card_highlight__RaXsA",projectCard:"message-card_projectCard__VWIjU",button:"message-card_button__1xfAc",userInfo:"message-card_userInfo__K8OJm",text:"message-card_text__6B9rv",loading:"message-card_loading__Ggkjc",card:"message-card_card__dSzcJ"}},4865:function(e){e.exports={list:"messages-list_list___dbDX",overlay:"messages-list_overlay__grpQP",loading:"messages-list_loading__nI9nq",empty:"messages-list_empty__wlKmH",grid:"messages-list_grid__jzezg"}},90069:function(e){e.exports={overlay:"project-card-column_overlay__F3nMd",activated:"project-card-column_activated__vM_jA",projectName:"project-card-column_projectName__EEzlv",view:"project-card-column_view___bQSS",love:"project-card-column_love__EZQ8M",favorite:"project-card-column_favorite__GXTBA",time:"project-card-column_time__fxMjf",content:"project-card-column_content__9poFI",projectInfo:"project-card-column_projectInfo__OcYUJ",projectAction:"project-card-column_projectAction__mYpcF",projectImage:"project-card-column_projectImage__KP8nq",projectAvatar:"project-card-column_projectAvatar__BTfnJ",projectStatus:"project-card-column_projectStatus__nudBb",views:"project-card-column_views__XmhY5",avatar:"project-card-column_avatar__QzBuu"}},41193:function(e){e.exports={card:"user-navigations_card__iaT6V"}},16641:function(e){e.exports={top:"messages_top__FfFQ5",pagination:"messages_pagination__5vsc6",content:"messages_content__d9e1b"}},2970:function(e,t,a){"use strict";a.d(t,{Z:function(){return p}});var n=a(67294),i=a(45697),s=a.n(i),r={pocketShapePath:"M11.329 0h90.555c7.42 0 11.13 2.538 11.13 7.614v49.828c0 5.325-3.36 7.987-10.082 7.987H11.414c-8.474 0-12.23-2.6-11.267-7.802V7.263C.147 2.42 3.875 0 11.33 0z",pocketShapeShadowPath:"M11.329 0h90.555c7.42 0 11.13 2.538 11.13 7.614v49.828c0 5.325-3.36 7.987-10.082 7.987H11.414c-8.474 0-12.23-2.6-11.267-7.802V7.263C.147 2.42 3.875 0 11.33 0z",hangingLoopShape:"M0 33.872c3.088-9.656 5.841-16.215 8.258-19.678 1.945-2.786 4.895-4.488 6.72-6.462 3.444-3.722 5.393-6.574 6.665-6.574 1.12 0-3.688 3.488-5.891 10.96-1.04 3.529-2.014 10.78-2.919 21.754H0zm43.62.992H30.8c-.904-11.217-1.876-18.63-2.915-22.237-2.2-7.636-7.029-11.47-5.91-11.47 1.271 0 3.243 3.183 6.682 6.987 1.824 2.018 4.77 3.758 6.713 6.606 2.415 3.539 5.164 10.244 8.25 20.114z",mainCompartmentShape:"M68.899 0c38.235 0 68.898 34.267 68.898 76.539v93.207c0 14.095-10.283 21.584-22.966 21.584H22.966C10.283 191.33 0 183.84 0 169.746V76.54C0 34.267 30.664 0 68.899 0z",mainCompartmentBottomStripe:"M137.797 156.949v13.373c0 13.924-10.283 21.324-22.966 21.324H22.966c-12.683 0-22.966-7.4-22.966-21.324v-13.373h137.797z",mainCompartmentTop:"M137.797 82.423v-5.948C137.797 34.423 107.134.333 68.9.333S-.001 34.423 0 76.475v5.948C0 40.371 30.664 6.281 68.899 6.281s68.898 34.09 68.898 76.142z",zip:"M109.285 1.983h2.028l.547 8.922h-2.974l.4-8.922zm.592 6.94v.99h.991v-.99h-.99z"},o=a(8703),l=a(29677),c=a(9696),d=function(e){var t=e.size,a=e.color,i=e.mood,s=e.className;return n.createElement(c.Z,{className:s},n.createElement("svg",{xmlnsXlink:"http://www.w3.org/1999/xlink",width:.63*t,height:t,viewBox:"0 0 138 218"},n.createElement("defs",null,n.createElement("path",{id:"pocket__shape-path",d:r.pocketShapePath}),n.createElement("path",{id:"pocket__shape__shadow-path",d:r.pocketShapeShadowPath})),n.createElement("g",{id:"kawaii-backpack",transform:"translate(0 -1)"},n.createElement("g",{id:"right-shoulder-strap",transform:"matrix(-1 0 0 1 125.901 13.054)"},n.createElement("path",{id:"right-shoulder-strap__back",fill:a,d:"M0 5.948v43.619l13.879-14.792z"}),n.createElement("path",{id:"right-shoulder-strap__back__shadow",fill:"#FFF",fillRule:"nonzero",opacity:"0.4",d:"M0 5.948v43.619l13.879-14.792z"}),n.createElement("path",{id:"right-shoulder-strap__front",fill:a,d:"M9.193 34.697L0 5.127 21.014 0l7.735 24.677z"})),n.createElement("g",{id:"left-shoulder-strap",transform:"translate(11.896 13.054)"},n.createElement("path",{id:"left-shoulder-strap__back",fill:a,d:"M0 5.948v43.619l13.879-14.792z"}),n.createElement("path",{id:"left-shoulder-strap__back_shadow",fill:"#FFF",fillRule:"nonzero",opacity:"0.4",d:"M0 5.948v43.619l13.879-14.792z"}),n.createElement("path",{id:"left-shoulder-strap__front",fill:a,d:"M9.193 34.697L0 5.127 21.014 0l7.735 24.677z"})),n.createElement("g",{id:"hanging-loop",transform:"translate(47.585)"},n.createElement("path",{id:"hanging-loop__back",fill:a,d:"M16.853 7.931h9.913L21.81.991z"}),n.createElement("path",{id:"hanging-loop__back_shadow",fill:"#121212",fillRule:"nonzero",opacity:"0.14",d:"M16.853 7.931h9.913L21.81.991z"}),n.createElement("path",{id:"hanging-loop__shape",fill:a,d:r.hangingLoopShape})),n.createElement("g",{id:"main-compartment",transform:"translate(0 26.617)"},n.createElement("path",{id:"main-compartment__shape",fill:a,d:r.mainCompartmentShape}),n.createElement("path",{id:"main-compartment__bottom-stripe",fill:"#121212",fillRule:"nonzero",d:r.mainCompartmentBottomStripe,opacity:"0.07"}),n.createElement(l.Z,{mood:i,transform:"translate(36 70)",uniqueId:(0,o.Z)()}),n.createElement("path",{id:"main-compartment__top",fill:"#121212",fillRule:"nonzero",d:r.mainCompartmentTop,opacity:"0.07"})),n.createElement("g",{id:"pocket",transform:"translate(12.888 135.981)"},n.createElement("mask",{id:"mask-4",fill:"#fff"},n.createElement("use",{xlinkHref:"#pocket__shape-path"})),n.createElement("use",{id:"pocket__shape",fill:a,xlinkHref:"#pocket__shape-path"}),n.createElement("mask",{id:"mask-6",fill:"#fff"},n.createElement("use",{xlinkHref:"#pocket__shape__shadow-path"})),n.createElement("use",{id:"pocket__shape__shadow",fill:"#121212",fillRule:"nonzero",opacity:"0.14",xlinkHref:"#pocket__shape__shadow-path"}),n.createElement("g",{id:"Group-6",mask:"url(#mask-6)"},n.createElement("g",{transform:"translate(0 15.862)"},n.createElement("path",{id:"Rectangle-7",fill:"#33363B",opacity:"0.408",d:"M0 2.974h113.014v2.974H0z"}),n.createElement("path",{id:"Rectangle-7-Copy",fill:"#555D67",opacity:"0.408",d:"M0 0h113.014v2.974H0z"}),n.createElement("path",{id:"Rectangle-8",fill:"#6D727A",opacity:"0.587",d:"M107.066 0h5.948v5.948h-5.948z"}),n.createElement("path",{id:"zip",fill:"#49505A",d:r.zip,opacity:"0.746"}))),n.createElement("g",{id:"brand",mask:"url(#mask-6)"},n.createElement("g",{transform:"translate(78.737 39.368)"},n.createElement("path",{id:"Rectangle-6",fill:"#FFFDFD",d:"M0 0h27.789v18.526H0z"}),n.createElement("path",{id:"Rectangle-6-Copy",fill:"#121212",opacity:"0.298",d:"M1.158 1.158h25.474v16.211H1.158z"}),n.createElement("path",{id:"brand",fill:"#FFF",d:"M2.316 2.316h23.158v13.895H2.316z"})))))))};d.propTypes={size:s().number,mood:s().oneOf(["sad","shocked","happy","blissful","lovestruck","excited","ko"]),color:s().string},d.defaultProps={size:240,mood:"blissful",color:"#FFD882"};var p=d}},function(e){e.O(0,[9879,6855,9774,2888,179],function(){return e(e.s=60166)}),_N_E=e.O()}]);